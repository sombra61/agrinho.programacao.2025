<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Conexão Cidade ao Campo — Plataforma Interativa</title>

  <!-- Leaflet CSS para mapas -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-sA+RrrOK6lOjfYbxdzMhGg1B+HcQohgNskv7q1V9Z+M="
    crossorigin=""
  />

  <style>
    /* Reset básico */
    *, *::before, *::after {
      margin: 0; padding: 0; box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #d1e8d1 0%, #c7d7e6 100%);
      color: #2c3e50;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Header / Navegação */
    header {
      background: #145214;
      color: #e6f0d4;
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 3px 7px rgba(0,0,0,0.3);
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
      user-select: none;
    }
    header h1 {
      font-family: 'Georgia', serif;
      font-size: 1.8rem;
      letter-spacing: 0.1rem;
      cursor: default;
      user-select: text;
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 1.3rem;
    }
    nav ul li {
      cursor: pointer;
      transition: color 0.3s ease;
    }
    nav ul li:hover {
      color: #a8d5ba;
    }

    /* Hero Section */
    #hero {
      position: relative;
      height: 60vh;
      background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1470&q=80') no-repeat center/cover;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #f0f0f0;
      text-shadow: 2px 2px 10px rgba(0,0,0,0.7);
      overflow: hidden;
    }
    #hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(20,82,20,0.8), transparent 60%);
      z-index: 1;
    }
    #hero-content {
      position: relative;
      z-index: 10;
      text-align: center;
      max-width: 90vw;
    }
    #hero-content h2 {
      font-size: 3rem;
      font-weight: 900;
      margin-bottom: 0.5rem;
      letter-spacing: 0.15rem;
      font-family: 'Georgia', serif;
      animation: fadeInSlideDown 1.2s ease forwards;
    }
    #hero-content p {
      font-size: 1.3rem;
      font-weight: 400;
      max-width: 600px;
      margin: 0 auto;
      animation: fadeInSlideUp 1.2s ease forwards;
      animation-delay: 0.4s;
    }

    /* Animations */
    @keyframes fadeInSlideDown {
      0% {
        opacity: 0; transform: translateY(-50px);
      }
      100% {
        opacity: 1; transform: translateY(0);
      }
    }
    @keyframes fadeInSlideUp {
      0% {
        opacity: 0; transform: translateY(50px);
      }
      100% {
        opacity: 1; transform: translateY(0);
      }
    }

    /* Conteúdo principal */
    main {
      flex: 1;
      padding: 2rem 3rem;
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 3fr 2fr;
      gap: 2.5rem;
      animation: fadeIn 1.5s ease forwards;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    /* Notícias e comentários */
    #news-section {
      background: #f9f9f9;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(20, 82, 20, 0.15);
      padding: 1.5rem 2rem;
      display: flex;
      flex-direction: column;
      height: 600px;
      overflow-y: auto;
    }
    #news-section h3 {
      margin-bottom: 1rem;
      color: #145214;
      font-family: 'Georgia', serif;
      font-size: 1.7rem;
      font-weight: 700;
      border-bottom: 2px solid #a8d5ba;
      padding-bottom: 0.3rem;
      user-select: none;
    }
    #news-list {
      list-style: none;
      flex: 1;
      overflow-y: auto;
    }
    #news-list li {
      margin-bottom: 1.2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #ccc;
    }
    #news-list li strong {
      color: #2c3e50;
    }
    #news-list li p {
      margin-top: 0.3rem;
      font-size: 0.9rem;
      color: #555;
    }

    /* Comentários */
    #comments-section {
      margin-top: 1.2rem;
      border-top: 2px solid #a8d5ba;
      padding-top: 1rem;
      display: flex;
      flex-direction: column;
    }
    #comments-section h4 {
      color: #145214;
      margin-bottom: 0.8rem;
      font-weight: 700;
      user-select: none;
    }
    #comments-list {
      list-style: none;
      max-height: 160px;
      overflow-y: auto;
      margin-bottom: 1rem;
      padding-right: 10px;
    }
    #comments-list li {
      font-size: 0.9rem;
      margin-bottom: 0.8rem;
      padding: 0.5rem;
      border-radius: 6px;
      background-color: #e6f0d4;
      box-shadow: 0 2px 5px rgba(20, 82, 20, 0.1);
    }
    #comment-form {
      display: flex;
      gap: 0.7rem;
    }
    #comment-input {
      flex: 1;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      border: 1.5px solid #a8d5ba;
      font-size: 1rem;
      transition: border-color 0.3s ease;
    }
    #comment-input:focus {
      outline: none;
      border-color: #145214;
      box-shadow: 0 0 6px #145214;
    }
    #comment-submit {
      padding: 0 1rem;
      background: #145214;
      color: white;
      font-weight: 600;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      border: none;
      font-size: 1rem;
    }
    #comment-submit:hover {
      background: #0f3a12;
    }

    /* Galeria com filtros */
    #gallery-section {
      background: #f9f9f9;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(42, 157, 143, 0.15);
      padding: 1.5rem 2rem;
      display: flex;
      flex-direction: column;
    }
    #gallery-section h3 {
      font-family: 'Georgia', serif;
      color: #2a9d8f;
      font-weight: 700;
      margin-bottom: 1rem;
      user-select: none;
    }
    #gallery-filters {
      margin-bottom: 1rem;
    }
    #gallery-filters button {
      border: none;
      background: #2a9d8f;
      color: #f9f9f9;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      margin-right: 0.7rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #gallery-filters button.active,
    #gallery-filters button:hover {
      background: #145214;
    }

    #gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
      gap: 1rem;
    }
    .gallery-item {
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 10px rgba(20, 82, 20, 0.15);
      cursor: pointer;
      transition: transform 0.3s ease;
      position: relative;
    }
    .gallery-item img {
      width: 100%;
      height: 140px;
      object-fit: cover;
      display: block;
      transition: transform 0.3s ease;
    }
    .gallery-item:hover img {
      transform: scale(1.1);
    }
    .gallery-caption {
      position: absolute;
      bottom: 0;
      background: rgba(20, 82, 20, 0.7);
      color: #f9f9f9;
      width: 100%;
      padding: 0.5rem 0.8rem;
      font-size: 0.9rem;
      font-weight: 600;
      text-align: center;
      user-select: none;
    }

    /* Mapa detalhado na sidebar */
    #map-section {
      background: #f9f9f9;
      margin-top: 2rem;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(20, 82, 20, 0.15);
      height: 350px;
      overflow: hidden;
    }
    #map {
      height: 100%;
      width: 100%;
      border-radius: 12px;
    }

    /* Formulário de contato */
    #form-section {
      background: #f9f9f9;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(20, 82, 20, 0.15);
      padding: 2rem;
      margin-top: 2rem;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    #form-section h3 {
      color: #145214;
      font-family: 'Georgia', serif;
      font-weight: 700;
      margin-bottom: 1rem;
      user-select: none;
      text-align: center;
      font-size: 2rem;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }
    label {
      font-weight: 600;
      color: #2c3e50;
      user-select: none;
    }
    input, textarea {
      font-size: 1rem;
      padding: 0.7rem 1rem;
      border-radius: 8px;
      border: 1.5px solid #a8d5ba;
      transition: border-color 0.3s ease;
      resize: vertical;
    }
    input:focus, textarea:focus {
      outline: none;
      border-color: #145214;
      box-shadow: 0 0 6px #145214;
    }
    button[type="submit"] {
      background: #145214;
      color: #f9f9f9;
      font-weight: 700;
      padding: 0.8rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-size: 1.2rem;
      transition: background-color 0.3s ease;
    }
    button[type="submit"]:hover {
      background: #0f3a12;
    }
    .form-feedback {
      font-size: 0.9rem;
      color: #145214;
      text-align: center;
      font-weight: 600;
      min-height: 1.2rem;
      user-select: none;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 1.5rem 0;
      background: #145214;
      color: #e6f0d4;
      font-size: 0.9rem;
      font-weight: 500;
      user-select: none;
      margin-top: 3rem;
    }

    /* Voltar ao topo */
    #back-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: #145214;
      color: white;
      font-weight: 700;
      border: none;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      display: none;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      transition: background-color 0.3s ease;
      z-index: 1200;
    }
    #back-to-top:hover {
      background: #0f3a12;
    }

    /* Responsividade */
    @media (max-width: 1024px) {
      main {
        grid-template-columns: 1fr;
        padding: 2rem 1.5rem;
      }
      #news-section, #gallery-section {
        height: auto;
      }
      #map-section {
        height: 250px;
        margin-top: 1.5rem;
      }
      #form-section {
        max-width: 100%;
        padding: 1.5rem;
      }
    }
    @media (max-width: 480px) {
      #hero-content h2 {
        font-size: 2.2rem;
      }
      #hero-content p {
        font-size: 1rem;
      }
      header h1 {
        font-size: 1.3rem;
      }
      nav ul {
        gap: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Conexão Cidade ao Campo</h1>
    <nav aria-label="Menu principal">
      <ul>
        <li data-scroll="hero">Início</li>
        <li data-scroll="news-section">Notícias</li>
        <li data-scroll="gallery-section">Galeria</li>
        <li data-scroll="map-section">Mapa</li>
        <li data-scroll="form-section">Contato</li>
      </ul>
    </nav>
  </header>

  <section id="hero" role="banner" aria-label="Imagem principal com slogan">
    <div id="hero-content">
      <h2>Unindo os mundos, inspirando vidas</h2>
      <p>Da cidade ao campo, uma conexão que transforma realidades.</p>
    </div>
  </section>

  <main>
    <section id="news-section" aria-label="Seção de notícias">
      <h3>Últimas notícias</h3>
      <ul id="news-list" tabindex="0" aria-live="polite" aria-relevant="additions">
        <!-- Notícias vão ser carregadas aqui -->
      </ul>

      <div id="comments-section" aria-label="Seção de comentários da notícia">
        <h4>Comentários</h4>
        <ul id="comments-list" aria-live="polite" aria-relevant="additions"></ul>
        <form id="comment-form" aria-label="Formulário para adicionar comentário">
          <input id="comment-input" type="text" placeholder="Escreva seu comentário" aria-required="true" aria-describedby="comment-help" />
          <button type="submit" aria-label="Enviar comentário">Enviar</button>
        </form>
      </div>
    </section>

    <section id="gallery-section" aria-label="Galeria de imagens">
      <h3>Galeria</h3>
      <div id="gallery-filters" role="radiogroup" aria-label="Filtros de galeria">
        <button class="active" data-filter="all" role="radio" aria-checked="true" tabindex="0">Todas</button>
        <button data-filter="cidade" role="radio" aria-checked="false" tabindex="-1">Cidade</button>
        <button data-filter="campo" role="radio" aria-checked="false" tabindex="-1">Campo</button>
      </div>
      <div id="gallery-grid">
        <!-- Imagens carregadas via JS -->
      </div>

      <div id="map-section" aria-label="Mapa interativo">
        <div id="map"></div>
      </div>
    </section>
  </main>

  <section id="form-section" aria-label="Formulário de contato">
    <h3>Entre em contato</h3>
    <form id="contact-form" novalidate>
      <label for="name">Nome</label>
      <input id="name" name="name" type="text" placeholder="Seu nome completo" required aria-required="true" />

      <label for="email">E-mail</label>
      <input id="email" name="email" type="email" placeholder="exemplo@dominio.com" required aria-required="true" />

      <label for="message">Mensagem</label>
      <textarea id="message" name="message" rows="5" placeholder="Escreva sua mensagem" required aria-required="true"></textarea>

      <button type="submit">Enviar</button>
      <div class="form-feedback" aria-live="polite" aria-atomic="true"></div>
    </form>
  </section>

  <button id="back-to-top" aria-label="Voltar ao topo" title="Voltar ao topo">↑</button>

  <footer>
    &copy; 2025 Conexão Cidade ao Campo. Todos os direitos reservados.
  </footer>

  <!-- Leaflet JS para mapas -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-o9N1j63oDZDf3pT9yI3h6TGc8wrTjoSbUL+p3Sv7u2A="
    crossorigin=""
  ></script>

  <script type="module">
    // ---- Dados simulados e módulo de notícias ----
    const newsData = [
      {
        id: 1,
        title: "Tecnologia rural revoluciona produção agrícola",
        summary: "Novas ferramentas digitais aumentam a produtividade e reduzem custos no campo.",
        date: "2025-06-01",
      },
      {
        id: 2,
        title: "Parceria entre cidades e áreas rurais amplia mercado local",
        summary: "Iniciativas fortalecem a economia local e promovem a sustentabilidade.",
        date: "2025-05-25",
      },
      {
        id: 3,
        title: "Evento sobre inovação no agronegócio será realizado em São Paulo",
        summary: "Especialistas discutirão o futuro da agricultura digital e conectada.",
        date: "2025-06-10",
      },
    ];

    // Gerencia notícias e comentários locais
    class NewsManager {
      constructor() {
        this.newsListEl = document.getElementById('news-list');
        this.commentsListEl = document.getElementById('comments-list');
        this.commentForm = document.getElementById('comment-form');
        this.commentInput = document.getElementById('comment-input');
        this.commentsKey = 'comments_storage';
        this.currentNewsId = newsData[0].id; // Seleciona primeira notícia por padrão

        this.comments = this.loadComments();
        this.renderNews();
        this.renderComments();

        this.commentForm.addEventListener('submit', (e) => {
          e.preventDefault();
          this.addComment();
        });

        this.newsListEl.addEventListener('click', (e) => {
          const li = e.target.closest('li');
          if (li && li.dataset.id) {
            this.currentNewsId = Number(li.dataset.id);
            this.renderComments();
            this.highlightSelectedNews();
          }
        });
      }

      loadComments() {
        const raw = localStorage.getItem(this.commentsKey);
        return raw ? JSON.parse(raw) : {};
      }
      saveComments() {
        localStorage.setItem(this.commentsKey, JSON.stringify(this.comments));
      }

      renderNews() {
        this.newsListEl.innerHTML = '';
        for (const news of newsData) {
          const li = document.createElement('li');
          li.tabIndex = 0;
          li.dataset.id = news.id;
          li.innerHTML = `<strong>${news.title}</strong><br><small>${news.date}</small><p>${news.summary}</p>`;
          if (news.id === this.currentNewsId) {
            li.style.backgroundColor = '#a8d5ba55';
            li.style.borderRadius = '8px';
          }
          this.newsListEl.appendChild(li);
        }
      }
      highlightSelectedNews() {
        for (const li of this.newsListEl.children) {
          if (Number(li.dataset.id) === this.currentNewsId) {
            li.style.backgroundColor = '#a8d5ba55';
            li.style.borderRadius = '8px';
          } else {
            li.style.backgroundColor = 'transparent';
            li.style.borderRadius = '0';
          }
        }
      }

      renderComments() {
        this.commentsListEl.innerHTML = '';
        const comments = this.comments[this.currentNewsId] || [];
        if (comments.length === 0) {
          this.commentsListEl.innerHTML = '<li><em>Seja o primeiro a comentar esta notícia.</em></li>';
          return;
        }
        for (const comment of comments) {
          const li = document.createElement('li');
          li.textContent = comment;
          this.commentsListEl.appendChild(li);
        }
      }

      addComment() {
        const text = this.commentInput.value.trim();
        if (!text) return;
        if (!this.comments[this.currentNewsId]) this.comments[this.currentNewsId] = [];
        this.comments[this.currentNewsId].push(text);
        this.saveComments();
        this.commentInput.value = '';
        this.renderComments();
      }
    }

    // ---- Galeria e filtro ----
    class GalleryManager {
      constructor() {
        this.galleryGrid = document.getElementById('gallery-grid');
        this.filterButtons = document.querySelectorAll('#gallery-filters button');
        this.images = [
          { src: 'https://picsum.photos/id/1011/300/200', alt: 'Cidade 1', category: 'cidade' },
          { src: 'https://picsum.photos/id/1015/300/200', alt: 'Campo 1', category: 'campo' },
          { src: 'https://picsum.photos/id/1025/300/200', alt: 'Cidade 2', category: 'cidade' },
          { src: 'https://picsum.photos/id/1043/300/200', alt: 'Campo 2', category: 'campo' },
          { src: 'https://picsum.photos/id/1060/300/200', alt: 'Campo 3', category: 'campo' },
          { src: 'https://picsum.photos/id/1074/300/200', alt: 'Cidade 3', category: 'cidade' },
        ];

        this.currentFilter = 'all';

        this.filterButtons.forEach(btn => {
          btn.addEventListener('click', () => {
            this.filterGallery(btn.dataset.filter);
          });
        });

        this.renderGallery();
      }

      filterGallery(filter) {
        this.currentFilter = filter;
        this.filterButtons.forEach(btn => {
          btn.classList.toggle('active', btn.dataset.filter === filter);
          btn.setAttribute('aria-checked', btn.dataset.filter === filter ? 'true' : 'false');
          btn.tabIndex = btn.dataset.filter === filter ? 0 : -1;
        });
        this.renderGallery();
      }

      renderGallery() {
        this.galleryGrid.innerHTML = '';
        const filteredImages = this.currentFilter === 'all'
          ? this.images
          : this.images.filter(img => img.category === this.currentFilter);

        for (const img of filteredImages) {
          const div = document.createElement('div');
          div.classList.add('gallery-item');
          div.innerHTML = `<img src="${img.src}" alt="${img.alt}" loading="lazy" />`;
          this.galleryGrid.appendChild(div);
        }
      }
    }

    // ---- Mapa com Leaflet ----
    class MapManager {
      constructor() {
        this.map = L.map('map').setView([-23.55052, -46.633308], 10); // São Paulo

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '© OpenStreetMap contributors',
          maxZoom: 18,
        }).addTo(this.map);

        this.addMarkers();
      }

      addMarkers() {
        const markersData = [
          {
            coords: [-23.55052, -46.633308],
            popup: "São Paulo - Centro urbano e polo econômico.",
          },
          {
            coords: [-23.681531, -46.875918],
            popup: "Zona rural próxima a São Paulo, com agricultura sustentável.",
          },
          {
            coords: [-23.699561, -46.711132],
            popup: "Área de transição entre cidade e campo.",
          },
        ];

        for (const data of markersData) {
          L.marker(data.coords).addTo(this.map).bindPopup(data.popup);
        }
      }
    }

    // ---- Formulário de contato ----
    class ContactFormManager {
      constructor() {
        this.form = document.getElementById('contact-form');
        this.feedbackEl = this.form.querySelector('.form-feedback');

        this.form.addEventListener('submit', (e) => {
          e.preventDefault();
          this.submitForm();
        });
      }

      validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
      }

      submitForm() {
        const name = this.form.name.value.trim();
        const email = this.form.email.value.trim();
        const message = this.form.message.value.trim();

        if (!name) {
          this.feedbackEl.textContent = "Por favor, informe seu nome.";
          return;
        }
        if (!this.validateEmail(email)) {
          this.feedbackEl.textContent = "Por favor, informe um e-mail válido.";
          return;
        }
        if (!message) {
          this.feedbackEl.textContent = "Por favor, escreva sua mensagem.";
          return;
        }

        // Simulação de envio - aqui poderia ser um fetch para backend
        this.feedbackEl.textContent = "Enviando mensagem...";
        setTimeout(() => {
          this.feedbackEl.textContent = "Mensagem enviada com sucesso! Obrigado pelo contato.";
          this.form.reset();
        }, 1500);
      }
    }

    // ---- Botão Voltar ao topo ----
    class BackToTopButton {
      constructor() {
        this.btn = document.getElementById('back-to-top');
        window.addEventListener('scroll', () => this.toggleVisibility());
        this.btn.addEventListener('click', () => this.scrollToTop());
      }

      toggleVisibility() {
        if (window.scrollY > 300) {
          this.btn.style.display = 'flex';
        } else {
          this.btn.style.display = 'none';
        }
      }

      scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }

    // ---- Inicialização ----
    document.addEventListener('DOMContentLoaded', () => {
      new NewsManager();
      new GalleryManager();
      new MapManager();
      new ContactFormManager();
      new BackToTopButton();

      // Navegação suave
      document.querySelectorAll('nav ul li').forEach(item => {
        item.addEventListener('click', () => {
          const sectionId = item.dataset.scroll;
          const section = document.getElementById(sectionId);
          if (section) {
            section.scrollIntoView({ behavior: 'smooth' });
          }
        });
      });
    });
  </script>
</body>
</html>

